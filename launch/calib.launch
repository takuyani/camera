<launch>
	<!-- set left/right camera device -->
	<arg name="right_camera_dev"	value="/dev/video1" />
	<arg name="left_camera_dev"		value="/dev/video2" />

	<!-- set Image Size -->
	<arg name="image_width"		value="320" />
	<arg name="image_height"	value="240" />

	<!-- chessboard size as NxM, counting interior corners -->
	<arg name="size" value="8x6" />

	<!-- chessboard square size in meters -->
	<arg name="square" value="0.024" />

	<!-- allow specified slop (in seconds) when pairing images from unsynchronized stereo cameras -->
	<arg name="approximate" value="0.01" />


	<group ns="stereo">
		<node name="right" pkg="usb_cam" type="usb_cam_node" output="screen" >
			<param name="video_device" value="$(arg right_camera_dev)" />
			<param name="image_width" value="$(arg image_width)" />
			<param name="image_height" value="$(arg image_height)" />
			<param name="pixel_format" value="yuyv" />
			<param name="camera_frame_id" value="head_right_camera" />
			<param name="io_method" value="mmap"/>
			<param name="camera_info_url" type="string" value="file://$(find minoru_camera)/data/camera_param/right_camera.yaml" />
			<param name="camera_name" value="head_right_camera"/>
		</node>

		<node name="left" pkg="usb_cam" type="usb_cam_node" output="screen" >
			<param name="video_device" value="$(arg left_camera_dev)" />
			<param name="image_width" value="$(arg image_width)" />
			<param name="image_height" value="$(arg image_height)" />
			<param name="pixel_format" value="yuyv" />
			<param name="camera_frame_id" value="head_left_camera" />
			<param name="io_method" value="mmap"/>
			<param name="camera_info_url" type="string" value="file://$(find minoru_camera)/data/camera_param/left_camera.yaml" />
			<param name="camera_name" value="head_left_camera"/>
		</node>

		<node name="calibrator" pkg="camera_calibration" type="cameracalibrator.py"
			args="--size $(arg size) --square $(arg square) --approximate=$(arg approximate)"
			output="screen" clear_params="true">
			<remap from="left" to="/stereo/left/image_raw" />
			<remap from="right" to="/stereo/right/image_raw" />
			<remap from="left_camera" to="/stereo/left" />
			<remap from="right_camera" to="/stereo/right" />
		</node>
	</group>
</launch>

