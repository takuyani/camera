<launch>

	<arg name="pi/2" value="1.5707963267948966" />
<!-- -$(arg pi/2) -->
	<arg name="camera_rotate" value="0 0 0 0 0 -$(arg pi/2)" />

<!-- static_transform_publisher x y z yaw pitch roll frame_id child_frame_id period_in_ms -->
	<node pkg="tf" type="static_transform_publisher" name="world_to_camera" output="screen" args="$(arg camera_rotate) world head_left_camera 10" />

	<group ns="stereo_camera">
		<node name="right" pkg="usb_cam" type="usb_cam_node" output="screen" >
			<param name="video_device" value="/dev/video1" />
			<param name="image_width" value="320" />
			<param name="image_height" value="240" />
			<param name="pixel_format" value="yuyv" />
			<param name="camera_frame_id" value="head_right_camera" />
			<param name="io_method" value="mmap"/>
			<param name="camera_info_url" type="string" value="file://$(find minoru_camera)/data/camera_param/right_camera.yaml" />
		</node>

		<node name="left" pkg="usb_cam" type="usb_cam_node" output="screen" >
			<param name="video_device" value="/dev/video2" />
			<param name="image_width" value="320" />
			<param name="image_height" value="240" />
			<param name="pixel_format" value="yuyv" />
			<param name="camera_frame_id" value="head_left_camera" />
			<param name="io_method" value="mmap"/>
			<param name="camera_info_url" type="string" value="file://$(find minoru_camera)/data/camera_param/left_camera.yaml" />
		</node>

		<node name="stereo_image_proc" pkg="stereo_image_proc" type="stereo_image_proc" args="_approximate_sync:=True" output="screen" />
	</group>

	<node name="rqt_reconfigure" pkg="rqt_reconfigure" type="rqt_reconfigure" output="screen"/>

	<node pkg="rviz" type="rviz" name="rviz" args="-d $(find minoru_camera)/config/stereo.rviz" />

</launch>

<!-- publish all the frames to TF -->

